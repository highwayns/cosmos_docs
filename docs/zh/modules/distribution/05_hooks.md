# 钩子

可以由此模块调用和从中调用的可用钩子。

## 创建或修改委托分配

- 触发:`staking.MsgDelegate`、`staking.MsgBeginRedelegate`、`staking.MsgUndelegate`

### 前

- 委托奖励提现到委托人提现地址。
  奖励包括当期，不包括起始期。
- 验证器周期增加。
  验证者周期增加是因为验证者的权力和份额分配可能已经改变。
- 委托人开始期间的引用计数递减。

### 后

代表团的起始高度设置为上一期。
由于“Before”挂钩，这个时期是委托人获得奖励的最后时期。

## 验证器已创建

- 触发:`staking.MsgCreateValidator`

创建验证器时，将初始化以下验证器变量:

- 历史奖励
- 当前累积奖励
- 累计佣金
- 未完成的总奖励
- 时期

默认情况下，所有值都设置为“0”，但句点设置为“1”。

## 验证器已删除

- 触发:`staking.RemoveValidator`

未完成的佣金被发送到验证者的自委托提款地址。
剩余的委托人奖励被发送到社区费用池。

注意:只有当它没有剩余的委托时，验证器才会被删除。
届时，所有优秀的委托人奖励将被收回。
任何剩余的奖励都是灰尘量。

## 验证器被削减

- 触发:`staking.Slash`
  
- 当前验证器周期引用计数增加。
  引用计数增加是因为斜线事件已经创建了对它的引用。
- 验证器周期增加。
- 存储斜线事件以备后用。
  计算委托人奖励时将参考斜线事件。 